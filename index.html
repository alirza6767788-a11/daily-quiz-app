<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Quiz Reward</title>

    <!-- Telegram Mini App SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>

    <!-- Monetag Rewarded Ad SDK -->
    <script src="https://cdn.monetag.com/vignette.min.js"
            data-zone="10576545"
            data-sdk="show_10576545"></script>

    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background: #f0f8ff;
            padding: 20px;
            margin: 0;
        }
        h1 {
            color: #0088cc;
        }
        button {
            padding: 14px 28px;
            font-size: 17px;
            margin: 10px;
            background: #0088cc;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
        }
        #coins {
            font-size: 22px;
            color: #333;
        }
    </style>
</head>

<body>
    <h1>Daily Quiz</h1>
    <p>Watch ads & earn coins üéÅ</p>

    <button onclick="startQuiz()">Start Quiz</button>
    <button onclick="watchInterstitialAd()">Watch Interstitial Ad +50 Coins</button>
    <button onclick="watchPopupAd()">Watch Popup Ad +50 Coins</button>

    <p id="coins">Your Coins: 0</p>

    <script>
        let coins = 0;

        // Telegram Mini App init
        const tg = Telegram.WebApp;
        tg.ready();
        tg.expand();

        // Coins update function
        function updateCoins() {
            document.getElementById("coins").innerText = "Your Coins: " + coins;
        }

        // Start Quiz
        function startQuiz() {
            tg.showAlert("Quiz coming soon!");
            coins += 10;
            updateCoins();
        }

        // Monetag SDK ready check
        let adReady = false;
        const adCheck = setInterval(() => {
            if (typeof show_10576545 === "function") {
                adReady = true;
                clearInterval(adCheck);
                console.log("Monetag Ad Ready");
            }
        }, 1000);

        // Interstitial ad (regular rewarded)
        function watchInterstitialAd() {
            if (!adReady) {
                tg.showAlert("Ad is loading‚Ä¶ wait 5‚Äì10 seconds and try again.");
                return;
            }

            show_10576545().then(() => {
                coins += 50;
                updateCoins();
                tg.showAlert("Reward added! +50 Coins üí∞");
            }).catch(() => {
                tg.showAlert("Ad was skipped or error occurred. No reward.");
            });
        }

        // Popup ad (pop rewarded)
        function watchPopupAd() {
            if (!adReady) {
                tg.showAlert("Ad is loading‚Ä¶ wait 5‚Äì10 seconds and try again.");
                return;
            }

            show_10576545('pop').then(() => {
                coins += 50;
                updateCoins();
                tg.showAlert("Popup Ad watched! +50 Coins üí∞");
            }).catch(() => {
                tg.showAlert("Popup Ad closed or error occurred. No reward.");
            });
        }

        updateCoins();
    </script>
</body>
</html>
